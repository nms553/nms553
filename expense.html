
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <script
    type="text/javascript"
    src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"
    
  ></script>

    <link rel="stylesheet" type="text/css" href="/css/result-light.css">


  <style id="compiled-css" type="text/css">
      html {
	background-color: white;
	padding-top: 0px;
}

body {
	width: 300px;
	margin: 0px auto 0px auto;
	border: 1px solid white;
	background-color: whitesmoke;
	
}
 
 h2 {
   font-size: 4em;
   border: 0px solid;
   margin-top: 10px;
   margin-bottom: 10px;
	 display: inline-block;
 }

 h3 {
   font-size: 2em;
   margin-top: 10px;
   margin-bottom: 10px;
	 color: limegreen;
 }

 hr {
   width: 50%;
   margin: 40px 0px 40px 0px;

 }

 #meter, #smeter {
   width: 50%;
   border: 1px solid;
   height: 18px;
   text-align: left;
   border-radius: 4px;
 }

 #used, #sused {
   min-width: 3px;
   background-color: lightgreen;
   height: 18px;
 }

 #amtused,
 #amtleft {
   display: inline-block;
   width: 30px;
   border: 0px solid;
   vertical-align: top;
   font-size: 0.8em;
 }

 #meter {
   display: inline-block;
 }

#table {
	display: none;
}

#infospan {
	font-size: 0.8em;
}

#amount {
	height: 35px;
	width: 100px;
	text-align: center;
	font-size: 1.25em;
}

#desc {
	font-size: 0.6em;
	width: 50%;
}
    /* EOS */
  </style>

  <script id="insert"></script>


</head>
<body>
    <center>

  <h1>Expenses</h1><br>



  $&nbsp;<input type="number" id="amount" placeholder="0.00">

  <br>
  <br>
  <br>
  <button id="saveButton">Save it</button><br>
  <br>
  <input type="text" id="desc" placeholder="Optional: i.e. Schnuck's">
  <br>
  <br>
  <details>
    <summary>Details</summary>
    <br>
    <br>
    <input type="date" id="date">
    <br><br>
    <label><input type="checkbox" id="bucket">Deduct from savings instead</label>
    <sup><a href="javascript:">[?]</a></sup>
    <br>
    <br>
    <input type="hidden" id="nick" name="person" value="Nick"><label for="nick">Nick</label>
    <input type="hidden" id="faith" name="person" value="Faith"><label for="faith">Faith</label><br><br>

  </details>



  <hr>

  We have spent
  <br>
  <h2 id="h2">$</h2>/$90
  <br>today.
  <br>
  <br>
  <span id="amtused">$</span>
  <div id="meter">
    <div id="used"></div>
  </div>
  <span id="amtleft">$</span>
  <br>
  <br>
  <a href="https://docs.google.com/spreadsheets/d/1DvaYXhcpPJvMFNDlDtx9oG-YGKfqtT6ZbPWqZIvaIxw/htmlembed?single=true&gid=1236564365&range=a1:ff66&widget=false&chrome=false">View transactions</a>
  <br>

  <hr>

  And we have
  <br>
  <h3 id="h3">$</h3>
  in reserves.
  <br><br>
  <hr>
  <br>

  In savings we have used
  <br>
  <h2 id="savingsused">$</h2>

  <br><br>
  <sub>
    <a href="https://docs.google.com/spreadsheets/d/1DvaYXhcpPJvMFNDlDtx9oG-YGKfqtT6ZbPWqZIvaIxw/edit#gid=543241343" target="blank">SS</a> - <a href="https://github.com/nms553/nms553.github.io/edit/master/expense.html">GitHub</a>
  </sub>


</center>



<br><br><br>


<fieldset style="display: none;">
  <legend>Submit data</legend>
  <form id="form" method="post" action="https://script.google.com/a/umsystem.edu/macros/s/AKfycbwFdsqLDH1TCK9FjY_ccJOU9f7IjpXpgCtLwMe9Qw/exec" target="iframe" style="display: initial;" onsubmit="myFunction()">
    <!--index: actual row of the gsheet -->
    <input type="hidden" name="sheetName" id="inp_row" value="Range1"><br>

    <input type="text" name="dataA" id="dataA"><br><br>
    <input type="text" name="dataB" id="dataB"><br><br>
    <input type="text" name="dataC" id="dataC"><br><br>
    <input type="text" name="dataD" id="dataD"><br><br>
    <input type="text" name="dataE" id="dataE"><br><br>

    <input type="submit"><br><br>
    <iframe src="" name="iframe" id="iframe" style="display: none;"></iframe>
  </form>
  <sup><a href="https://docs.google.com/spreadsheets/d/1DvaYXhcpPJvMFNDlDtx9oG-YGKfqtT6ZbPWqZIvaIxw/edit#gid=0" target="blank">Jewpa Google Sheet Database (open new window)</a></sup>
</fieldset>


    <script type="text/javascript">//<![CDATA[


$(document).ready(function() {
  $.getJSON("https://spreadsheets.google.com/feeds/list/1DvaYXhcpPJvMFNDlDtx9oG-YGKfqtT6ZbPWqZIvaIxw/2/public/full?alt=json", function(result) {
    var data = result.feed.entry
    console.log(data)

    var xx = data[0].gsx$today.$t * -1
    var yy = data[0].gsx$reserve.$t
		var zz = data[0].gsx$savingsused.$t
		
		$("#amtused").append(xx)
		$("#amtleft").append(90-xx)
		$("#savingsused").append(zz)

    var used = xx / 0.9 + "%"
    if (xx > 90) {
      used = "100%"
      $("#used").css("background-color", "red")
    }
		
		if (yy < 0) {
      $("#h3").css("color", "red")
    }

    $("#used").css("width", used)

    $("#h2").append(xx)
    $("#h3").append(yy)
  })
})

function myFunction() {
  setTimeout(function() {
    location.reload()
  }, 1000);

}

$("#saveButton").click(function() {
  var d = new Date();
  var mon = parseInt(d.getMonth()) + 1
  var w = d.getFullYear() + "-" + mon + "-" + d.getDate();
  var y = $("#amount").val() * -1
	if ($("#date").val()) {
		w = $("#date").val()
	}
  var x;
  var nick = document.getElementById("nick")
	var faith = document.getElementById("nick")
  if (nick.checked == true) {
    x = "Nick"
  } else if (faith.checked == true) {
    x = "Faith"
  }
  var z = $("#desc").val()

  var v = document.getElementById("bucket").checked

  $("#dataA").val(w)
  $("#dataB").val(x)
  $("#dataC").val(y)
  $("#dataD").val(z)
  $("#dataE").val(v)
  $("form").submit();
})

$("sup a").click(function() {
	alert("Do you want to deduct from savings instead of the daily balance?")
})


  //]]></script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "vt4oqm81"
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>


</body>
</html>
